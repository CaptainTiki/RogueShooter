extends InputNode
class_name PlayerInput

func _ready() -> void:
	Input.mouse_mode = Input.MOUSE_MODE_CAPTURED

func _physics_process(_delta: float) -> void:
	move_input = Vector3.ZERO
	if Input.is_action_pressed("move_fwd"):
		move_input.z += 1
	if Input.is_action_pressed("move_back"):
		move_input.z -= 1
	if Input.is_action_pressed("move_left"):
		move_input.x -= 1
	if Input.is_action_pressed("move_right"):
		move_input.x += 1
		
	jump_pressed = Input.is_action_just_pressed("jump")
	jump_held = Input.is_action_pressed("jump")
	jump_released = Input.is_action_just_released("jump")

func get_look_delta() -> Vector2:
	var value : Vector2 = look_delta
	look_delta = Vector2.ZERO
	return value

func get_move_input() -> Vector3:
	return move_input

func _input(event: InputEvent) -> void:
	if event is InputEventMouseMotion:
		var mouse = event.relative
		look_delta.x += mouse.x
		look_delta.y += mouse.y
	
	if event is InputEvent:
		if event.is_action_pressed("ui_cancel"):
			Input.mouse_mode = Input.MOUSE_MODE_VISIBLE
